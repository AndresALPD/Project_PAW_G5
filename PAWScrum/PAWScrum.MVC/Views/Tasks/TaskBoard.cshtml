@model IEnumerable<PAWScrum.Models.DTOs.Tasks.TaskResponseDto>
@{
    ViewData["Title"] = "Task Board";
    var groups = Model.GroupBy(t => t.Status ?? "To Do")
                      .OrderBy(g => g.Key);
}

<h2 class="mb-4 text-center fw-bold">📌 Task Board</h2>

<div class="row">
    @foreach (var col in groups)
    {
        <div class="col-md-4">
            <div class="card shadow-sm border-0 mb-4">
                <div class="card-header text-white fw-bold text-center"
                     style="background-color:@(col.Key == "To Do" ? "#0d6efd" : col.Key == "In Progress" ? "#ffc107" : "#198754")">
                    @col.Key (@col.Count())
                </div>

                <div class="p-2" style="min-height: 300px; background: #f8f9fa;">
                    @if (!col.Any())
                    {
                        <div class="text-muted text-center small mt-3">No tasks yet</div>
                    }
                    else
                    {
                        @foreach (var t in col)
                        {
                            <div class="card mb-3 border-0 shadow-sm task-card">
                                <div class="card-body p-3">
                                    <h6 class="card-title fw-bold mb-1">@t.Title</h6>
                                    <p class="card-text small text-muted mb-1">
                                        ⏳ Est: @t.EstimationHours · ✅ Done: @t.CompletedHours
                                    </p>
                                    <p class="card-text small">
                                        👤 <span class="fw-semibold">Assigned:</span> @t.AssignedUserName ?? "-"
                                    </p>
                                    <div class="d-flex justify-content-end">
                                        <a class="btn btn-sm btn-outline-primary me-2"
                                           asp-controller="Tasks" asp-action="Edit" asp-route-id="@t.Id">
                                            ✏ Edit
                                        </a>
                                        <a class="btn btn-sm btn-outline-secondary"
                                           asp-controller="Tasks" asp-action="Details" asp-route-id="@t.Id">
                                            🔍 View
                                        </a>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    }
</div>

<style>
    .task-card {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        border-radius: 10px;
    }

        .task-card:hover {
            transform: translateY(-3px);
            box-shadow: 0px 4px 12px rgba(0,0,0,0.1);
        }
</style>
